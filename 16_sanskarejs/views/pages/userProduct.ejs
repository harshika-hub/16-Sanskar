<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js">
  $('form').submit(function(e){
      e.preventDefault(); // prevents page reloading
     // api request
     return false;
  });
</script> -->
    <style>
        .review::placeholder {
            color: #f47c00;
            font-style: italic;
            text-align: center;
        }
    </style>

    <%- include("../partials/head"); %>
        <title>User Products</title>

</head>

<body>

    <div id="nav-ediv">
        <nav class="navbar navbar-expand-lg navbar-light text-white">
            <div class="container-fluid">
                <a class=" navbar-brand d-md-none" href="#"><img src="/images/16-sanskar.png" alt=""
                        style="width: 120px; height: 50px;"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-around" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/blogs">Blog <i class="fa fa-pencil-square-o"
                                    aria-hidden="true"></i></a>
                        </li>
                        <li class="nav-item dropdown ">
                            <a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Sanskar's-List
                            </a>
                            <ul class="dropdown-menu " aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Garbhadhaan">1.
                                        Garbhadhaan</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/punsavan">2. Punsavan</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Simantonayan">3. Simantonayan</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Jatkarma">4. Jatkarma</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Naamkaran">5. Naamkaran</a>
                                </li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Nishkramana">6. Nishkramana</a></li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Annprashan">7. Annprashan</a>
                                </li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Chaudakaran">8. Chaudakaran</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Karnavedh">9. Karnavedh</a>
                                </li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Upnayan">10. Upnayan</a></li>


                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Vedarambha">11. Vedarambha</a>
                                </li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Samavartan">12. Samavartan</a>
                                </li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Vivah">13. Vivah</a></li>
                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Vanaprasth">14. Vanaprasth</a>
                                </li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Sanyas">15. Sanyas</a></li>

                                <li><a class="dropdown-item" href="/userProduct/bySanskar/Antyesthi">16. Antyesthi</a>
                                </li>

                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/userProduct/comboProduct">Combo-Product <i
                                    class="fa fa-product-hunt" aria-hidden="true"></i>
                            </a>
                        </li>

                    </ul>
                    <a class="navbar-brand d-none d-md-block" href="/"><img src="/images/16-sanskar.png"
                            style="width: 120px; height: 50px; align-items: center;"></a>
                </div>
                <div class="collapse navbar-collapse justify-content-around" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/userProduct/user_profile">User Profile <i
                                    class="fa fa-user" aria-hidden="true"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/userProduct/logout">Log-Out <i class="fa fa-sign-out"
                                    aria-hidden="true"></i>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link text-white" href="/userProduct/Cart"> <i class="fa fa-shopping-cart"
                                    style="font-size:24px;"></i>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <div class="container " style="margin-top: 15vh;">
        <h2 align="center" style="color: #f47c00; font-weight: bold;" class="mt-5">User Products</h2>
        <div class="row row-cols-1 row-cols-md-3 mt-5">
            <% if (item && item.length) { %>
                <% item.forEach((data, index)=> { %>
                    <!-- Render data here -->
                    <div class="col-4 mb-4">
                        <div class="card ">
                            <img src="/uploads/<%=data.vproduct_imag%>" class="card-img-top" alt="Product 1"
                                style="height: 25vh; width: 26vw;">
                            <div class="card-body">
                                <center>
                                    <span style="font-size: 25px; color: #f47c00;">Product Id:-</span>
                                    <span style="font-size: 25px; ">
                                        <%=data._id%>
                                    </span>
                                    <input type="hidden" id="productId<%= index %>" name="productId"
                                        style="border: none;" value="<%=data.vproduct_id%>" disabled>
                                </center>
                                <br>
                                <p class="card-text">Product Name:- <%=data.vproduct_name%>
                                </p>
                                <p class="card-text">Product Price:- <%= data.vproduct_price%>
                                </p>
                                <p class="card-text" style="width: 20vw; height: 8vh;">Product Description:- <%= data.vproduct_description%>
                                </p>
                                <button class="btn text-white "
                                    style="background-color: #f47c00; margin-left: 80px;">Add to Cart</button>
                                <button class="btn reviewButton text-white" id="reviewButton<%= index %>"
                                    data-productid="<%=data.vproduct_id%>"
                                    style="background-color: #f47c00; margin-left: 30px;">Review</button>
                                <form action="/userproduct/reviewProduct" method="post">
                                    <input type="hidden" id="productId" name="productId" value="<%=data.vproduct_id%>">
                                    <textarea name="review" id="reviewInput<%= index %>" class="review"
                                        placeholder="Enter a review here..."
                                        style="display: none; margin-left: 18px; margin-top: 20px; border:2px solid #f47c00;"
                                        cols="40" rows="2" disabled></textarea>
                                    <button class="btn" type="submit" id="submitButton<%= index %>"
                                        style="display: none; margin-left: 150px; margin-top: 10px;background-color: #f47c00;"
                                        disabled>Submit</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <% }); %>
                        <% } else { %>
                            <h1 class="text-center " >There is No product Available</h1>
                            <% } %>
        </div>
    </div>
    </div>
    <script>
        document.querySelectorAll('.reviewButton').forEach((button, index) => {
            button.addEventListener('click', function () {
                const reviewInput = document.getElementById('reviewInput' + index);
                const submitButton = document.getElementById('submitButton' + index);
                reviewInput.style.display = 'block';
                reviewInput.disabled = false;
                submitButton.style.display = 'block';
                submitButton.disabled = false;
            });
        });
    </script>
    <%- include('../partials/footer.ejs'); %>
</body>

</html>